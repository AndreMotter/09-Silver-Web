<div class="container">
    <div class="header">
      <h1>Listagem de Categoria</h1>
    </div>
    <div style="margin-bottom: 10px;">
      <button pButton type="button" label="Adicionar Categoria" icon="pi pi-plus" (click)="abrirModal()"></button>
    </div>
    <div class="card">
        <p-table [value]="categorias" [tableStyle]="{ 'min-width': '50rem' }">
            <ng-template pTemplate="header">
                <tr>
                    <th>Código</th>
                    <th>Sigla</th>
                    <th>Descrição</th>
                    <th>Tipo</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-categoria>
                <tr>
                    <td>{{ categoria.cat_codigo }}</td>
                    <td>{{ categoria.cat_sigla }}</td>
                    <td>{{ categoria.cat_descricao }}</td>
                    <td>{{ categoria.cat_tipo == 0 ? 'Despesa' : 'Receita' }}</td>
                    <td>
                      <button pButton type="button" icon="pi pi-pencil" label="Editar" class="p-button-rounded p-button-success p-mr-3" (click)="editar(categoria.cat_codigo)"></button>
                      <button pButton type="button" icon="pi pi-trash"  label="Excluir" class="p-button-rounded p-button-danger" (click)="excluir(categoria.cat_codigo)"></button>
                  </td>
                  
                </tr>
            </ng-template>
            <ng-template pTemplate="empty">
              <tr>
                <td colspan="6">Nenhum registro encontrado</td>
              </tr>
            </ng-template>
        </p-table>
      </div>

      <p-dialog header="Incluir/Alterar Categoria" [(visible)]="displayModal" [modal]="true" [responsive]="true" [style]="{width: '50vw'}">
        <form #pessoaForm="ngForm">
          <div class="p-fluid">
            <div class="p-field">
              <label for="nome">Sigla</label>
              <input type="text" id="nome" pInputText [(ngModel)]="categoria.cat_sigla" name="nome" required />
            </div>
            <div class="p-field">
              <label for="login">Descrição</label>
              <input type="text" id="login" pInputText [(ngModel)]="categoria.cat_descricao" name="login" required />
            </div>
            <div class="p-field">
                <p-dropdown [options]="tiposCategorias" [(ngModel)]="categoria.cat_tipo" placeholder="Tipo Categoria" optionLabel="name"></p-dropdown>
            </div>
          </div>
          <p-footer>
            <button type="button" pButton label="Salvar" icon="pi pi-check" (click)="salvar()"></button>
          </p-footer>
        </form>
      </p-dialog>
</div>  